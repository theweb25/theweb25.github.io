<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>music player</title>
    <meta name="description" content="music player with Playlist Manager and EQ">
    
    <!-- JSZip for ZIP file support -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <style>
        :root {
            --accent: #00ff41;
            --black: #000000;
            --gray: #0a1a0a;
            --dark-gray: #111;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--black); }
        ::-webkit-scrollbar-thumb { background: var(--accent); }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: monospace;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation; /* Prevents double-tap zoom */
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden; /* Prevent body scroll */
            position: fixed; /* Prevent pull-to-refresh and bounce on mobile */
        }

        body {
            background-color: var(--black);
            color: var(--accent);
            display: flex;
            flex-direction: column;
            text-transform: uppercase;
        }

        header { padding: 20px; border-bottom: 1px solid var(--accent); flex-shrink: 0; }

        .top-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            margin-bottom: 10px;
            opacity: 0.8;
        }

        .now-playing {
            font-size: 1.2rem;
            margin-bottom: 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .controls-top {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--black);
            min-width: 180px;
            border: 1px solid var(--accent);
            z-index: 1000;
            top: 100%;
            left: 0;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-item {
            width: 100%;
            text-align: left;
            padding: 10px;
            border: none;
            border-bottom: 1px solid var(--dark-gray);
            background: none;
            color: var(--accent);
            cursor: pointer;
            font-family: monospace;
            text-transform: uppercase;
        }

        .dropdown-item:last-child { border-bottom: none; }
        .dropdown-item:hover { background: var(--gray); }

        button {
            background: none;
            border: 1px solid var(--accent);
            color: var(--accent);
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.9rem;
            text-transform: uppercase;
            display: inline-block;
        }

        button:active { background: var(--accent); color: var(--black); }
        button:disabled { opacity: 0.3; cursor: not-allowed; }

        .progress-container { width: 100%; margin: 10px 0; }
        #progress-bar { width: 100%; accent-color: var(--accent); cursor: pointer; }

        #playlist { flex-grow: 1; overflow-y: auto; list-style: none; padding: 10px; }

        .song-item {
            padding: 12px;
            border: 1px solid #333;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .song-item.active { border-color: var(--accent); background: var(--gray); }

        .tag { font-size: 0.7rem; background: var(--accent); color: var(--black); padding: 2px 4px; margin-left: 5px; }

        .full-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--black);
            z-index: 500;
            flex-direction: column;
            padding: 40px 20px;
            overflow-x: hidden;
        }

        #lyrics-content {
            flex-grow: 1;
            overflow-y: auto;
            font-size: 1.5rem;
            line-height: 1.6;
            text-align: center;
            text-transform: none;
            padding-bottom: 50px;
        }

        .lyric-line { 
            margin: 15px 0; 
            opacity: 0.4; 
            transition: opacity 0.3s; 
            cursor: pointer;
        }
        
        .lyric-line.highlight { 
            opacity: 1; 
            text-decoration: underline; 
            text-underline-offset: 8px;
        }

        .close-btn { align-self: flex-end; font-size: 1.5rem; background: none; border: none; color: var(--accent); cursor: pointer; }

        .modal {
            background: #050505;
            border: 1px solid var(--accent);
            padding: 20px;
            margin: auto;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        input[type="text"], input[type="range"] {
            accent-color: var(--accent);
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin: 15px 0;
            background: #000;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: monospace;
        }

        .maker-table-container {
            width: 100%;
            overflow-x: auto;
        }

        .maker-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.8rem;
            text-align: left;
        }
        .maker-table th, .maker-table td { border: 1px solid #222; padding: 8px; }

        /* EQ Styles */
        .eq-container {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            gap: 10px;
        }
        .eq-slider {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 150px;
        }
        .eq-slider input {
            writing-mode: bt-lr; /* IE */
            appearance: slider-vertical;
            width: 20px;
            height: 100px;
        }
        .eq-label { font-size: 0.6rem; margin-top: 10px; }

        .help-section {
            text-align: left;
            padding: 20px;
            font-size: 0.8rem;
            line-height: 1.4;
            max-width: 600px;
            margin: 0 auto;
        }
        .help-section h3 { border-bottom: 1px solid var(--accent); margin: 15px 0 5px 0; padding-bottom: 2px;}

        .db-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            border-bottom: 1px solid #111;
            font-size: 0.7rem;
            align-items: center;
        }
    </style>
</head>
<body>

<header>
    <div class="top-info">
        <span id="current-date">--/--/--</span>
        <span id="current-time">00:00:00</span>
    </div>

    <div class="now-playing" id="track-title">NO TRACK SELECTED</div>
    
    <div class="controls-top">
        <div class="dropdown">
            <button>IMPORT ▼</button>
            <div class="dropdown-content">
                <button class="dropdown-item" onclick="document.getElementById('audio-upload').click()">AUDIO/ZIP PACKAGE</button>
                <button class="dropdown-item" onclick="toggleOverlay('link-overlay')">WEB LINK</button>
            </div>
        </div>

        <button onclick="toggleOverlay('db-overlay')">SAVED LRCS</button>
        <button onclick="toggleOverlay('maker-overlay')">PLAYLIST MANAGER</button>
        <button onclick="toggleOverlay('eq-overlay')">EQ</button>
        <button onclick="toggleOverlay('help-overlay')">HELP</button>
        <button id="lyrics-btn" disabled>LYRICS</button>
        <button onclick="resetApp()" style="color: #ff3b3b; border-color: #600;">RESET</button>
    </div>

    <div style="display: flex; gap: 10px;">
        <button id="prev-btn">PREV</button>
        <button id="play-pause-btn" style="flex:1">PLAY</button>
        <button id="next-btn">NEXT</button>
    </div>

    <div class="progress-container">
        <input type="range" id="progress-bar" value="0">
    </div>
    <div id="save-status" style="font-size: 0.7rem; height: 1.2rem;"></div>
</header>

<input type="file" id="audio-upload" multiple accept="audio/*,.zip" style="display:none">
<input type="file" id="db-lrc-upload" multiple accept=".lrc" style="display:none">

<ul id="playlist"></ul>

<!-- Help Overlay -->
<div id="help-overlay" class="full-overlay" style="overflow-y: auto;">
    <button class="close-btn" onclick="toggleOverlay('help-overlay')">[X]</button>
    <div class="help-section">
        <h2>HELP & INSTRUCTIONS</h2>
        <h3>GENERAL USE</h3>
        <p>IMPORT SONGS VIA THE "IMPORT" BUTTON. YOU CAN UPLOAD SINGLE AUDIO FILES OR A FORMATTED ZIP PLAYLIST.</p>
        
        <h3>PLAYLIST MANAGER</h3>
        <p>GO TO "PLAYLIST MANAGER" TO PACKAGE YOUR OWN SONGS INTO ZIP FILES. SELECT AUDIO FILES AND OPTIONAL LRC FILES. THE MANAGER MATCHES THEM BY FILENAME AUTOMATICALLY. DOWNLOAD THE ZIP TO SHARE OR SAVE.</p>
        
        <h3>SAVED LRCS</h3>
        <p>LRC FILES SAVED TO THE "SAVED LRCS" PANEL WILL AUTOMATICALLY SYNC WITH ANY SONG YOU PLAY THAT HAS THE SAME NAME, REGARDLESS OF WHERE THE SONG CAME FROM</p>
        
        <h3>LYRICS INTERACTION</h3>
        <p>CLICK ON ANY LINE OF LYRICS IN THE OVERLAY TO JUMP TO THAT PART OF THE SONG. THE CURRENT LINE WILL BE UNDERLINED.</p>

        <h3>EQUALIZER</h3>
        <p>ADJUST FREQUENCY GAINS IN THE "EQ" PANEL TO CHANGE HOW YOUR MUSIC SOUNDS</p>
    
         <h3>MANUAL ZIP FORMATTING</h3>
        <p>MAKE A FOLDER WITH TWO OTHER FOLDERS NAMED MUSIC AND LRC. ADD MUSIC TO THE MUSIC FOLDER AND LRC FILES TO THE LRC FOLDER. ZIP THE FOLDER.</p>
    </div>
</div>

<!-- EQ Overlay -->
<div id="eq-overlay" class="full-overlay" style="justify-content: center;">
    <div class="modal">
        <h3>EQUALIZER</h3>
        <div class="eq-container" id="eq-sliders">
            <!-- Sliders generated by JS -->
        </div>
        <button onclick="toggleOverlay('eq-overlay')">CLOSE</button>
    </div>
</div>

<!-- Lyrics Overlay -->
<div id="lyrics-overlay" class="full-overlay">
    <button class="close-btn" onclick="toggleOverlay('lyrics-overlay')">[X]</button>
    <div id="lyrics-content"></div>
</div>

<!-- DB Overlay -->
<div id="db-overlay" class="full-overlay">
    <button class="close-btn" onclick="toggleOverlay('db-overlay')">[X]</button>
    <h2>SAVED LRCS</h2>
    <button onclick="document.getElementById('db-lrc-upload').click()">+ IMPORT LRC FILES</button>
    <div style="text-align:left; max-width:500px; margin:20px auto; border:1px solid var(--accent); height:300px; overflow-y:auto;" id="db-list-content"></div>
    <button onclick="clearDatabase()" style="border-color: #600; color: #ff3b3b; font-size: 0.7rem;">WIPE SAVED LRCS</button>
</div>

<!-- Link Overlay -->
<div id="link-overlay" class="full-overlay" style="justify-content: center;">
    <div class="modal">
        <h3>IMPORT FROM LINK</h3>
        <input type="text" id="link-input" placeholder="PASTE AUDIO URL HERE">
        <div style="display: flex; gap: 10px; justify-content: center;">
            <button onclick="addLink()">IMPORT</button>
            <button onclick="toggleOverlay('link-overlay')">CANCEL</button>
        </div>
    </div>
</div>

<!-- ZIP Maker Overlay (Playlist Manager) -->
<div id="maker-overlay" class="full-overlay" style="overflow-y: auto;">
    <button class="close-btn" onclick="toggleOverlay('maker-overlay')">[X]</button>
    <h2>PLAYLIST MANAGER</h2>
    <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 20px;">
        <button onclick="document.getElementById('maker-audio-input').click()">+ AUDIO</button>
        <button onclick="document.getElementById('maker-lrc-input').click()">+ LRCs</button>
    </div>
    <input type="file" id="maker-audio-input" multiple accept="audio/*" style="display:none">
    <input type="file" id="maker-lrc-input" multiple accept=".lrc" style="display:none">
    <div class="maker-table-container">
        <table class="maker-table">
            <thead>
                <tr><th>NAME</th><th>AUDIO</th><th>LRC</th><th>DELETE</th></tr>
            </thead>
            <tbody id="maker-list"></tbody>
        </table>
    </div>
    <div style="margin-top: 20px;">
        <input type="text" id="maker-filename" placeholder="PLAYLIST NAME" style="max-width: 300px;">
        <br>
        <button onclick="exportZIP()" style="background: var(--accent); color: var(--black);">DOWNLOAD ZIP PACKAGE</button>
    </div>
</div>

<audio id="main-audio" crossorigin="anonymous"></audio>

<script>
    const audio = document.getElementById('main-audio');
    const playlistEl = document.getElementById('playlist');
    const trackTitle = document.getElementById('track-title');
    const playPauseBtn = document.getElementById('play-pause-btn');
    const progressBar = document.getElementById('progress-bar');
    const saveStatus = document.getElementById('save-status');

    let playlist = [];
    let lrcDatabase = {}; 
    let currentIndex = -1;
    let makerFiles = { audio: {}, lrc: {} };

    // --- Audio Context & EQ ---
    let audioCtx, source, equalizer = [];
    const bands = [60, 170, 310, 600, 1000, 3000, 6000, 12000, 14000, 16000];

    function initAudio() {
        if (audioCtx) return;
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        source = audioCtx.createMediaElementSource(audio);
        
        let lastNode = source;
        bands.forEach((freq, i) => {
            const filter = audioCtx.createBiquadFilter();
            filter.type = "peaking";
            filter.frequency.value = freq;
            filter.Q.value = 1;
            filter.gain.value = 0;
            lastNode.connect(filter);
            lastNode = filter;
            equalizer.push(filter);
            
            // UI Slider
            const sliderWrap = document.createElement('div');
            sliderWrap.className = 'eq-slider';
            sliderWrap.innerHTML = `
                <input type="range" min="-20" max="20" step="1" value="0" 
                    oninput="updateEQ(${i}, this.value)">
                <span class="eq-label">${freq >= 1000 ? (freq/1000)+'k' : freq}</span>
            `;
            document.getElementById('eq-sliders').appendChild(sliderWrap);
        });
        lastNode.connect(audioCtx.destination);
    }

    window.updateEQ = (index, val) => {
        if (equalizer[index]) equalizer[index].gain.value = val;
    };

    // --- Lifecycle ---
    window.onload = () => {
        const savedDB = localStorage.getItem('player_lrc_db');
        if (savedDB) lrcDatabase = JSON.parse(savedDB);
        
        const savedPlaylist = localStorage.getItem('player_playlist');
        if (savedPlaylist) {
            playlist = JSON.parse(savedPlaylist);
            syncPlaylistWithDB();
        }
        
        updatePlaylistUI();
        updateDBUI();
        setInterval(updateClock, 1000);
    };

    function updateClock() {
        const now = new Date();
        document.getElementById('current-time').innerText = now.toLocaleTimeString();
        document.getElementById('current-date').innerText = now.toLocaleDateString();
    }

    // --- Playlist Manager (Maker) & Zip ---
    document.getElementById('maker-audio-input').onchange = (e) => {
        Array.from(e.target.files).forEach(file => {
            makerFiles.audio[file.name.replace(/\.[^/.]+$/, "")] = file;
        });
        updateMakerUI();
    };

    document.getElementById('maker-lrc-input').onchange = (e) => {
        Array.from(e.target.files).forEach(file => {
            makerFiles.lrc[file.name.replace(/\.[^/.]+$/, "")] = file;
        });
        updateMakerUI();
    };

    function updateMakerUI() {
        const list = document.getElementById('maker-list');
        const allNames = new Set([...Object.keys(makerFiles.audio), ...Object.keys(makerFiles.lrc)]);
        list.innerHTML = Array.from(allNames).map(name => `
            <tr>
                <td>${name}</td>
                <td style="color:${makerFiles.audio[name] ? '#0f0' : '#f00'}">${makerFiles.audio[name] ? 'VALID' : '!'}</td>
                <td style="color:${makerFiles.lrc[name] ? '#0f0' : '#555'}">${makerFiles.lrc[name] ? 'VALID' : '-'}</td>
                <td><button onclick="removeFromMaker('${name}')">DELETE</button></td>
            </tr>
        `).join('');
    }

    window.removeFromMaker = (name) => { delete makerFiles.audio[name]; delete makerFiles.lrc[name]; updateMakerUI(); };

    async function exportZIP() {
        const zip = new JSZip();
        const music = zip.folder("music");
        const lrc = zip.folder("lrc");
        const keys = Object.keys(makerFiles.audio);
        if (keys.length === 0) return alert("SELECT AUDIO FIRST");
        
        setStatus("PACKING...");
        keys.forEach(k => {
            music.file(makerFiles.audio[k].name, makerFiles.audio[k]);
            if (makerFiles.lrc[k]) lrc.file(makerFiles.lrc[k].name, makerFiles.lrc[k]);
        });
        
        const blob = await zip.generateAsync({type:"blob"});
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = (document.getElementById('maker-filename').value || "playlist") + ".zip";
        link.click();
        setStatus("DONE");
    }

    // --- Core Operations ---
    document.getElementById('audio-upload').onchange = async (e) => {
        const files = Array.from(e.target.files);
        for (const file of files) {
            if (file.name.toLowerCase().endsWith('.zip')) await processPackage(file);
            else addTrack(file.name.replace(/\.[^/.]+$/, ""), URL.createObjectURL(file));
        }
        updatePlaylistUI();
        saveData();
    };

    async function processPackage(file) {
        setStatus("UNZIP...");
        try {
            const zip = await JSZip.loadAsync(file);
            const audios = [];
            const lrcs = {};
            const promises = [];
            zip.forEach((path, entry) => {
                const name = entry.name.split('/').pop().replace(/\.[^/.]+$/, "");
                if (/\.(mp3|wav|ogg|m4a|flac)$/i.test(entry.name)) {
                    promises.push(entry.async("blob").then(b => audios.push({name, blob:b})));
                } else if (entry.name.endsWith('.lrc')) {
                    promises.push(entry.async("string").then(s => lrcs[name] = parseLRC(s)));
                }
            });
            await Promise.all(promises);
            audios.forEach(a => addTrack(a.name, URL.createObjectURL(a.blob), lrcs[a.name]));
            setStatus("READY");
        } catch(e) { setStatus("ERROR"); }
    }

    function addTrack(name, url, lrc = null) {
        playlist.push({ name, url, lyrics: lrc || lrcDatabase[name] || null });
    }

    function parseLRC(text) {
        const lines = text.split('\n');
        const res = [];
        const reg = /\[(\d+):(\d+\.\d+)\]/;
        lines.forEach(line => {
            const m = reg.exec(line);
            if (m) res.push({ time: parseFloat(m[1])*60 + parseFloat(m[2]), text: line.replace(reg, '').trim() });
        });
        return res.sort((a,b) => a.time - b.time);
    }

    window.playTrack = (idx) => {
        initAudio(); 
        currentIndex = idx;
        const t = playlist[idx];
        audio.src = t.url;
        audio.play();
        trackTitle.innerText = t.name;
        playPauseBtn.innerText = "PAUSE";
        updatePlaylistUI();
    };

    function updatePlaylistUI() {
        playlistEl.innerHTML = playlist.map((t, i) => `
            <li class="song-item ${i === currentIndex ? 'active' : ''}">
                <div style="flex:1; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">
                    ${t.name} ${t.lyrics ? '<span class="tag">LRC</span>' : ''}
                </div>
                <button onclick="playTrack(${i})">PLAY</button>
                <button onclick="removeTrack(${i})">×</button>
            </li>
        `).join('');
        document.getElementById('lyrics-btn').disabled = !playlist[currentIndex]?.lyrics;
    }

    window.removeTrack = (i) => {
        playlist.splice(i, 1);
        if (currentIndex === i) { audio.src = ""; currentIndex = -1; trackTitle.innerText = "NO TRACK"; }
        else if (currentIndex > i) currentIndex--;
        updatePlaylistUI();
        saveData();
    };

    playPauseBtn.onclick = () => {
        initAudio();
        if (audio.paused) { audio.play(); playPauseBtn.innerText = "PAUSE"; }
        else { audio.pause(); playPauseBtn.innerText = "PLAY"; }
    };

    document.getElementById('next-btn').onclick = () => playlist.length && playTrack((currentIndex + 1) % playlist.length);
    document.getElementById('prev-btn').onclick = () => playlist.length && playTrack((currentIndex - 1 + playlist.length) % playlist.length);

    audio.ontimeupdate = () => {
        progressBar.max = audio.duration || 0;
        progressBar.value = audio.currentTime;
        if (document.getElementById('lyrics-overlay').style.display === 'flex') {
            const lrc = playlist[currentIndex]?.lyrics;
            if (lrc) {
                let active = -1;
                lrc.forEach((l, i) => { if (audio.currentTime >= l.time) active = i; });
                document.querySelectorAll('.lyric-line').forEach(el => el.classList.remove('highlight'));
                const line = document.getElementById(`line-${active}`);
                if (line) { 
                    line.classList.add('highlight'); 
                    line.scrollIntoView({ behavior: 'smooth', block: 'center' }); 
                }
            }
        }
    };

    progressBar.oninput = () => audio.currentTime = progressBar.value;

    document.getElementById('lyrics-btn').onclick = () => {
        const lrc = playlist[currentIndex]?.lyrics;
        if (!lrc) return;
        document.getElementById('lyrics-content').innerHTML = lrc.map((l, i) => `
            <div class="lyric-line" id="line-${i}" onclick="seekTo(${l.time})">${l.text}</div>
        `).join('');
        toggleOverlay('lyrics-overlay');
    };

    window.seekTo = (time) => {
        audio.currentTime = time;
    };

    window.toggleOverlay = (id) => {
        const el = document.getElementById(id);
        el.style.display = (el.style.display === 'flex') ? 'none' : 'flex';
    };

    function setStatus(m) { saveStatus.innerText = m; setTimeout(() => saveStatus.innerText = "", 2000); }
    
    function saveData() {
        localStorage.setItem('player_playlist', JSON.stringify(playlist.map(t => ({name: t.name, lyrics: t.lyrics}))));
        localStorage.setItem('player_lrc_db', JSON.stringify(lrcDatabase));
        setStatus("SAVED");
    }

    // --- Saved LRCs Helpers ---
    document.getElementById('db-lrc-upload').onchange = (e) => {
        const files = Array.from(e.target.files);
        let count = 0;
        files.forEach(file => {
            const reader = new FileReader();
            const name = file.name.replace(/\.[^/.]+$/, "");
            reader.onload = (event) => {
                lrcDatabase[name] = parseLRC(event.target.result);
                count++;
                if (count === files.length) {
                    saveData();
                    updateDBUI();
                    syncPlaylistWithDB();
                }
            };
            reader.readAsText(file);
        });
    };

    function updateDBUI() {
        const container = document.getElementById('db-list-content');
        const keys = Object.keys(lrcDatabase);
        if (keys.length === 0) {
            container.innerHTML = "<div style='text-align:center; padding-top:20px;'>NO SAVED LRCS</div>";
            return;
        }
        container.innerHTML = keys.map(k => `
            <div class="db-item">
                <span>${k}</span>
                <button onclick="deleteFromDB('${k}')" style="font-size:0.6rem; padding: 2px 5px;">DEL</button>
            </div>
        `).join('');
    }

    window.deleteFromDB = (name) => {
        delete lrcDatabase[name];
        saveData();
        updateDBUI();
    };

    window.clearDatabase = () => {
        if (confirm("CLEAR ALL SAVED LYRICS?")) {
            lrcDatabase = {};
            saveData();
            updateDBUI();
        }
    };

    function syncPlaylistWithDB() {
        let found = false;
        playlist.forEach(track => {
            if (!track.lyrics && lrcDatabase[track.name]) {
                track.lyrics = lrcDatabase[track.name];
                found = true;
            }
        });
        if (found) updatePlaylistUI();
    }

    window.addLink = () => {
        const url = document.getElementById('link-input').value.trim();
        if (!url) return;
        const name = url.split('/').pop().split('?')[0].replace(/\.[^/.]+$/, "") || "LINKED TRACK";
        addTrack(name, url);
        document.getElementById('link-input').value = "";
        toggleOverlay('link-overlay');
        updatePlaylistUI();
        saveData();
    };

    window.resetApp = () => { if(confirm("WIPE ALL DATA?")) { localStorage.clear(); location.reload(); }};
    audio.onended = () => document.getElementById('next-btn').click();
</script>
</body>
</html>
